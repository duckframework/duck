{# This template extends Sphinx's awesome theme default page.html template #}
{% extends "!page.html" %}

{# Include the content of the parent template in the relevant blocks #}
{% block extrahead %}
    {{ super() }}

    {# Add a JSON-encoded version list for use by JavaScript #}
    <script id="version-list" type="application/json">
        {% set v=[] %} {# Set empty versions list #}
        
        {% if versions is defined %}
          {%- for version in versions -%}
            {# Append versions dictionary, we use append(...) or "" to avoid adding None to the evaluated statement #}
            {{ v.append({"name": version.name, "url": version.url}) or "" }}
          {%- endfor -%}
        {% endif %}
        
        {# Add versions JSON to template #}
        {{ v | tojson | safe}}
        
    </script>

    {# Link to the version-picker JavaScript. Pathto ensures proper handling of static paths. #}
    <script src="{{ pathto('_static/js/version-picker.js', 1) }}" defer></script>
{% endblock %}
